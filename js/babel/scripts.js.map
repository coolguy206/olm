{"version":3,"file":"scripts.js","names":["GOOGLE_API_KEY","sheet_id","baseURL","range","message","$","document","ready","console","log","get","data","show","theSheets","sheets","on","e","preventDefault","hide","theEmail1","val","toLowerCase","theEmail2","each","i","theEvent","properties","title","rowData","j","str","thisDate","values","formattedValue","thisEmail","thisName","thisChild","thisGrade","undefined","elem","empty","append","css","titles","length","innerHTML","closest","addClass","fail","err"],"sources":["../scripts.js"],"sourcesContent":["import $ from \"jquery\";\r\n// require('dotenv').config()\r\n// console.log(process.env)\r\n\r\n// const dotenv = require('dotenv');\r\n// dotenv.config();\r\n// console.log(process.env);\r\n\r\n// console.log(process.env)\r\n\r\nvar GOOGLE_API_KEY = \"AIzaSyD-bqqEqVuD1nhHqjozx5VnDAwKMGgpE7c\";\r\n//? to test error\r\n// var GOOGLE_API_KEY = \"xyz\";\r\nvar sheet_id = `1-2g3tZj_hjCnSxLquhs3uAAXTm4UZQ8AxDBPCvzKcTE`;\r\nvar baseURL = `https://sheets.googleapis.com/v4/spreadsheets/`;\r\nvar range = `A:Z`;\r\n\r\n\r\nvar message = ``;\r\n\r\n$(document).ready(function () {\r\n    console.log(`page ready`);\r\n    $.get(`${baseURL}${sheet_id}?key=${GOOGLE_API_KEY}&includeGridData=true`, function (data) {\r\n\r\n        console.log(`all good`);\r\n        console.log(data);\r\n        $('.the-form').show();\r\n\r\n        var theSheets = data.sheets;\r\n\r\n        $('form').on('submit', function (e) {\r\n            e.preventDefault();\r\n\r\n            //! reset message var\r\n            message = ``;\r\n\r\n            //! reset error message & ul\r\n            $('.error-message, ul').hide();\r\n\r\n            var theEmail1 = $('input[name=\"email1\"]').val().toLowerCase();\r\n            var theEmail2 = $('input[name=\"email2\"]').val().toLowerCase();\r\n            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 52 ~ $ ~ theEmail\", theEmail1)\r\n            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 53 ~ $ ~ theEmail\", theEmail2)\r\n\r\n            //?execute the loop\r\n            $.each(theSheets, function (i, val) {\r\n                // console.log(\"ðŸš€ ~ file: scripts.js ~ line 43 ~ $.each ~ val\", val)\r\n\r\n                var theEvent = val.properties.title;\r\n                // console.log(\"ðŸš€ ~ file: scripts.js ~ line 47 ~ $.each ~ theEvent\", theEvent);\r\n\r\n                //? loop the rowData to find email\r\n                $.each(val.data[0].rowData, function (j, str) {\r\n\r\n                    if (j !== 0) {\r\n\r\n                        var thisDate = str.values[0].formattedValue;\r\n                        var thisEmail = str.values[1].formattedValue;\r\n                        var thisName = str.values[2].formattedValue;\r\n                        var thisChild = str.values[3].formattedValue;\r\n                        var thisGrade = str.values[4].formattedValue;\r\n                        // console.log(\"ðŸš€ ~ file: scripts.js ~ line 53 ~ $.each ~ thisEmail\", thisEmail);\r\n\r\n                        if (thisEmail !== undefined) {\r\n\r\n                            thisEmail = thisEmail.toLowerCase();\r\n\r\n                            if (thisEmail == theEmail1 || thisEmail == theEmail2) {\r\n                                // console.log(`match`);\r\n                                // console.log(\"ðŸš€ ~ file: scripts.js ~ line 56 ~ $.each ~ thisEmail == theEmail\", thisEmail == theEmail1);\r\n                                // console.log(\"ðŸš€ ~ file: scripts.js ~ line 56 ~ $.each ~ thisEmail == theEmail\", thisEmail == theEmail2);\r\n                                var elem = `<li>\r\n                                    <h3>${theEvent}</h3>\r\n                                    <h4>Email: ${thisEmail}</h4>\r\n                                    <h4>Name: ${thisName}</h4>\r\n                                    <h4>Child: ${thisChild}</h4>\r\n                                    <h4>Grade: ${thisGrade}</h4>\r\n                                    <h4>Date: ${thisDate}</h4>\r\n                                </li>`;\r\n\r\n                                message += elem;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n            });\r\n\r\n            //!clear all previous submissions\r\n            $('ul').empty();\r\n\r\n            if (message !== ``) {\r\n\r\n                //?display on page\r\n                $('ul').append(message);\r\n                $('ul').css('display', 'flex');\r\n\r\n            } else {\r\n\r\n                //!display error message\r\n                $('.error-message').show();\r\n\r\n            }\r\n\r\n            //! find duplicates and highlight them\r\n            var titles = $('ul h3');\r\n            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 99 ~ titles\", titles)\r\n\r\n            for (var i = 0; i < titles.length - 1; i++) {\r\n\r\n                if (titles[i + 1].innerHTML == titles[i].innerHTML) {\r\n                    // console.log(`match`);\r\n                    // console.log(titles[i + 1].innerHTML);\r\n                    // console.log(titles[i].innerHTML);\r\n\r\n                    $(titles[i + 1]).closest('li').addClass('duplicate');\r\n                    $(titles[i]).closest('li').addClass('duplicate');\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        //! if .get fails show the error message to contact developer\r\n    }).fail(function (err) {\r\n\r\n        console.log(`something went wrong`);\r\n        // console.log(err);\r\n        $('.the-error').show();\r\n\r\n    });\r\n\r\n});\r\n\r\n\r\n"],"mappings":"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"}