{"version":3,"file":"scripts.js","names":["GOOGLE_API_KEY","SIGNUP_GENIUS_KEY","sheet_id","baseURL","range","sGBaseURL","sGSignUps","sGReports","message","$","document","ready","console","log","signUpArr","genius","google","fetch","then","data","json","map","val","i","d","startdatestring","split","date","Date","toDateString","obj","title","id","signupid","url","signupurl","img","mainimage","push","signup","length","signUps","arr","j","email","amountpaid","firstname","lastname","phone","item","comments","comment","location","qty","myqty","err","show","hide","sheets","properties","rowData","values","formattedValue","undefined","signUpObj","name","kidname","grade","on","e","preventDefault","theEmail1","toLowerCase","theEmail2","theEvent","theEventURL","theEventDate","theEventImg","thisEmail","thisPhone","elem","empty","append","css","titles","innerHTML","closest","addClass","locationsArr","itemsArr","pointsCount","textContent","indexOf"],"sources":["../scripts.js"],"sourcesContent":["import $ from \"jquery\";\r\n// require('dotenv').config()\r\n// console.log(process.env)\r\n\r\n// const dotenv = require('dotenv');\r\n// dotenv.config();\r\n// console.log(process.env);\r\n\r\n// console.log(process.env)\r\n\r\nvar GOOGLE_API_KEY = \"AIzaSyD-bqqEqVuD1nhHqjozx5VnDAwKMGgpE7c\";\r\nvar SIGNUP_GENIUS_KEY = `?user_key=KzhGWmcydml5bFRlTHd6bzc4TWRUdz09`;\r\n\r\n//? to test error\r\n// var GOOGLE_API_KEY = \"xyz\";\r\n// var SIGNUP_GENIUS_KEY = \"xyz\";\r\n\r\nvar sheet_id = `1-2g3tZj_hjCnSxLquhs3uAAXTm4UZQ8AxDBPCvzKcTE`;\r\nvar baseURL = `https://sheets.googleapis.com/v4/spreadsheets/`;\r\nvar range = `A:Z`;\r\n\r\nvar sGBaseURL = `https://api.signupgenius.com/v2/k/`;\r\nvar sGSignUps = `signups/created/all/`;\r\nvar sGReports = `signups/report/all/`;\r\n\r\n\r\nvar message = ``;\r\n\r\n$(document).ready(function () {\r\n    console.log(`page ready`);\r\n\r\n    var signUpArr = {\r\n        genius: [],\r\n        google: []\r\n    };\r\n\r\n    //? GET SIGNUPS FROM SIGNUP GENIUS\r\n    fetch(`${sGBaseURL}${sGSignUps}${SIGNUP_GENIUS_KEY}`).then((data) => { return data.json() }).then((data) => {\r\n        console.log(`sign ups`);\r\n        console.log(data);\r\n\r\n        data.data.map((val, i) => {\r\n            // console.log(val);\r\n            var d = val.startdatestring;\r\n            d = d.split(` `)[0];\r\n            // console.log(d);\r\n            var date = new Date(d).toDateString();\r\n            var obj = {\r\n                title: val.title,\r\n                id: val.signupid,\r\n                url: val.signupurl,\r\n                img: val.mainimage,\r\n                date: date\r\n            }\r\n            signUpArr.genius.push(obj);\r\n            // console.log(obj);\r\n        });\r\n        // console.log(`signUpArr`);\r\n        // console.log(signUpArr);\r\n\r\n        return signUpArr;\r\n\r\n        //? GET THE REPORTS FROM SIGNUP GENIUS\r\n    }).then((signUpArr) => {\r\n        signUpArr.genius.map((val, i) => {\r\n            fetch(`${sGBaseURL}${sGReports}${val.id}/${SIGNUP_GENIUS_KEY}`).then((data) => { return data.json() }).then((data) => {\r\n                console.log(val.title);\r\n                console.log(`count: ${data.data.signup.length}`)\r\n                // console.log(`reports`);\r\n                console.log(data);\r\n                // console.log(`signup`);\r\n\r\n                val.signUps = [];\r\n                // console.log(val);\r\n                data.data.signup.map((arr, j) => {\r\n                    if (arr.email !== ``) {\r\n                        var obj = {\r\n                            amountpaid: arr.amountpaid,\r\n                            email: arr.email,\r\n                            firstname: arr.firstname,\r\n                            lastname: arr.lastname,\r\n                            phone: arr.phone,\r\n                            item: arr.item,\r\n                            comments: arr.comment,\r\n                            location: arr.location,\r\n                            qty: arr.myqty\r\n                        }\r\n                        val.signUps.push(obj);\r\n                    }\r\n                });\r\n                // console.log(val);\r\n            }).catch((err) => {\r\n                console.log(`oops something went wrong`);\r\n                console.log(err);\r\n                $('.the-error').show();\r\n                $(`.the-form`).hide();\r\n            });\r\n            // console.log(`outside fetch`);\r\n            // console.log(signUpArr);\r\n        });\r\n\r\n        return signUpArr;\r\n\r\n        //? GET GOOGLE SHEETS\r\n    }).then((signUpArr) => {\r\n        fetch(`${baseURL}${sheet_id}?key=${GOOGLE_API_KEY}&includeGridData=true`).then((data) => { return data.json() }).then((data) => {\r\n            // console.log(`google sheets`);\r\n            // console.log(data);\r\n\r\n            data.sheets.map((val, i) => {\r\n                var obj = {\r\n                    title: val.properties.title,\r\n                    signUps: []\r\n                }\r\n                val.data[0].rowData.map((arr, j) => {\r\n                    if (j !== 0) {\r\n                        if (arr.values[0].formattedValue !== undefined) {\r\n                            var d = new Date(arr.values[0].formattedValue).toDateString()\r\n                            var signUpObj = {\r\n                                date: d,\r\n                                email: arr.values[1].formattedValue,\r\n                                name: arr.values[2].formattedValue,\r\n                                kidname: arr.values[3].formattedValue,\r\n                                grade: arr.values[4].formattedValue,\r\n                            }\r\n                            obj.signUps.push(signUpObj);\r\n                        }\r\n                    }\r\n                });\r\n                signUpArr.google.push(obj);\r\n            });\r\n            // console.log(signUpArr);\r\n            // return signUpArr;\r\n        }).catch((err) => {\r\n            console.log(`oops something went wrong`);\r\n            console.log(err);\r\n            $('.the-error').show();\r\n            $(`.the-form`).hide();\r\n        });;\r\n\r\n        return signUpArr;\r\n\r\n    }).then((signUpArr) => {\r\n        console.log(signUpArr);\r\n        console.log(`all good`);\r\n        $(`.the-form`).show();\r\n\r\n        $('form').on('submit', function (e) {\r\n            e.preventDefault();\r\n\r\n            //! reset message var\r\n            message = ``;\r\n\r\n            //! reset error message & ul\r\n            $('.error-message, ul').hide();\r\n\r\n            var theEmail1 = $('input[name=\"email1\"]').val().toLowerCase();\r\n            var theEmail2 = $('input[name=\"email2\"]').val().toLowerCase();\r\n            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 52 ~ $ ~ theEmail\", theEmail1)\r\n            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 53 ~ $ ~ theEmail\", theEmail2)\r\n\r\n            if (theEmail1 !== `` || theEmail2 !== ``) {\r\n\r\n                //?execute the loop\r\n                signUpArr.genius.map((val, i) => {\r\n                    var theEvent = val.title;\r\n                    var theEventURL = val.url;\r\n                    var theEventDate = val.date;\r\n                    var theEventImg = val.img;\r\n\r\n                    val.signUps.map((arr, j) => {\r\n                        var thisEmail = arr.email.toLowerCase();\r\n                        var thisPhone = arr.phone;\r\n                        if(thisPhone == undefined){\r\n                            thisPhone = ``;\r\n                        }\r\n                        if (thisEmail == theEmail1 || thisEmail == theEmail2) {\r\n                            var elem = `<li>\r\n                        <a href=\"${theEventURL}\" target=\"_blank\">\r\n                            <img src=\"${theEventImg}\" alt=\"${theEvent}\">\r\n                            <h3 class=\"event-title\">${theEvent}</h3>\r\n                        </a>\r\n                        <h4>Email: ${arr.email}</h4>\r\n                        <h4>Name: ${arr.firstname} ${arr.lastname}</h4>\r\n                        <h4>Phone: ${thisPhone}</h4>\r\n                        <!--<h4>Amount Paid: ${arr.amountpaid}</h4>-->\r\n                        <h4 class=\"item\">Item: ${arr.item}</h4>\r\n                        <h4 class=\"location\">Location: ${arr.location}</h4>\r\n                        <h4>Qty: ${arr.qty}</h4>\r\n                        <h4>Comments: ${arr.comments}</h4>\r\n                        \r\n                        <!-- <h4>Child: ${arr.kidname}</h4>\r\n                        <h4>Grade: ${arr.grade}</h4>\r\n                        <h4>Date: ${arr.date}</h4> -->\r\n                    </li>`;\r\n\r\n                            message += elem;\r\n                        }\r\n                    });\r\n                });\r\n\r\n                signUpArr.google.map((val, i) => {\r\n                    var theEvent = val.title;\r\n                    val.signUps.map((arr, j) => {\r\n                        var thisEmail = arr.email.toLowerCase();\r\n                        if (thisEmail == theEmail1 || thisEmail == theEmail2) {\r\n                            // console.log(`match`);\r\n                            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 56 ~ $.each ~ thisEmail == theEmail\", thisEmail == theEmail1);\r\n                            // console.log(\"ðŸš€ ~ file: scripts.js ~ line 56 ~ $.each ~ thisEmail == theEmail\", thisEmail == theEmail2);\r\n                            var elem = `<li>\r\n                            <h3>${theEvent}</h3>\r\n                            <h4>Email: ${arr.email}</h4>\r\n                            <h4>Name: ${arr.name}</h4>\r\n                            <h4>Child: ${arr.kidname}</h4>\r\n                            <h4>Grade: ${arr.grade}</h4>\r\n                            <h4>Date: ${arr.date}</h4>\r\n                        </li>`;\r\n\r\n                            message += elem;\r\n\r\n                        }\r\n                    });\r\n                })\r\n\r\n                //!clear all previous submissions\r\n                $('ul').empty();\r\n\r\n                if (message !== ``) {\r\n                    //?display on page\r\n                    $('ul').append(message);\r\n                    $('ul').css('display', 'flex');\r\n                } else {\r\n                    //!display error message\r\n                    $('.error-message').show();\r\n                }\r\n\r\n                //! find duplicates and highlight them\r\n                var titles = $('ul h3');\r\n                // console.log(\"ðŸš€ ~ file: scripts.js ~ line 99 ~ titles\", titles)\r\n\r\n                for (var i = 0; i < titles.length - 1; i++) {\r\n\r\n                    if (titles[i + 1].innerHTML == titles[i].innerHTML) {\r\n                        // console.log(`match`);\r\n                        // console.log(titles[i + 1].innerHTML);\r\n                        // console.log(titles[i].innerHTML);\r\n\r\n                        $(titles[i + 1]).closest('li').addClass('duplicate');\r\n                        $(titles[i]).closest('li').addClass('duplicate');\r\n                    }\r\n                }\r\n\r\n\r\n                //! add up total points\r\n                var locationsArr = $('.location');\r\n                var itemsArr = $('.item');\r\n                console.log(locationsArr, itemsArr);\r\n                var pointsCount = [];\r\n                locationsArr.map((i, val) => {\r\n                    // console.log(val);\r\n                    console.log(val.textContent);\r\n                    if(val.textContent.indexOf('pts') !== -1){\r\n                        pointsCount.push(val.textContent);\r\n                    }\r\n                });\r\n\r\n                itemsArr.map((i, val) => {\r\n                    // console.log(val);\r\n                    console.log(val.textContent);\r\n                    if(val.textContent.indexOf('pts') !== -1){\r\n                        pointsCount.push(val.textContent);\r\n                    }\r\n                });\r\n                console.log(`pointsCount`);\r\n                console.log(pointsCount);\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }).catch((err) => {\r\n        console.log(`oops something went wrong`);\r\n        console.log(err);\r\n        $('.the-error').show();\r\n        $(`.the-form`).hide();\r\n    });\r\n\r\n\r\n});\r\n\r\n\r\n\r\n"],"mappings":"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"}